<p>Input:<br><textarea id="input" rows="10" cols="80"></textarea>
<p><button onclick="process()">Process</button>
<p>Output:<br><textarea id="output" rows="10" cols="80"></textarea>

<script>

function process() {
  x = document.getElementById("input").value
  y = x.toLowerCase()
  words = y.split(" ")
  output = []
  exceptions = ["use", "union", "universe", "university", "universities", "unit", "user", "uniform", "usage", "utility", "urine", "uranium", "unison", "euphoria", "utopia", "unanimity", "unanimous", "uterus", "unicorn", "euphemism", "eugenics", "usurp", "usurper", "usability", "uni", "eucalyptus", "one", "usury", "eulogy", "universal", "urinal", "universalism", "euro", "euope", "european", "utensil", "uniform", "ukulele", "usurer", "eukaryote", "useful", "ukrainian", "ukraine", "unite", "eureka", "onesie", "unix", "evgeny"]
  for (i=0; i < words.length; i++) {
    if (words[i] == "a" || words[i] == "an") {
	next = words[i+1][0]
		if (exceptions.includes(words[i+1])) {
			output.push("a")
		} else if (next == "a" || next == "e" || next == "i" || next == "o" || next == "u") {
			output.push("an")
	    } else {
			output.push("a")
	    };
	}  else {
		output.push(words[i])
	};
  }; 
  document.getElementById("output").value = output.join(" ");
}

</script>